(this["webpackJsonpbookstore-react-redux"]=this["webpackJsonpbookstore-react-redux"]||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){"use strict";c.r(t);var n=c(1),a=c.n(n),o=c(16),r=c.n(o),s=c(5),i=c(13),l=c(18),j=c(27),u=c.n(j),b=c(28),d=c(22),m=c.n(d),h=c(29),O=c(24),p="bookstore/book/LOAD_BOOKS",x="bookstore/book/REMOVE_BOOK",f="bookstore/book/GET_BOOKS";function v(e){return{type:f,books:e}}var g=[];var N=function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi",e.next=3,fetch("".concat("https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi","/apps/nU7PpkbrGSD80b3w1Lzl/books/"));case 3:return c=e.sent,e.next=6,c.json();case 6:n=e.sent,t(v(n));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e){return function(t){fetch("".concat("https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi","/apps/nU7PpkbrGSD80b3w1Lzl/books/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(){t(N())}))}},k=function(e){return function(t){fetch("".concat("https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi","/apps/nU7PpkbrGSD80b3w1Lzl/books/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:e})}).then((function(e){return e.text()})).then((function(){t(N())}))}},$=Object(l.b)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=t.book,n=t.id,a=t.type,o=t.books;switch(a){case p:return[].concat(Object(O.a)(e),[c]);case f:return Object(O.a)(Object.entries(o).map((function(e){return{id:e[0],title:e[1][0].title,category:e[1][0].category}})));case x:return e.filter((function(e){return e.id!==n}));default:return e}}}),C=Object(l.c)($,Object(l.a)(u.a,b.a)),S=c(3),w=c(4),B=c(11),A=c(8),D=c(48),P=c(0),E=function(e){var t=e.value,c=e.content;return Object(P.jsx)("option",{value:t,children:c})},I=function(e){var t=e.title,c=e.category,a=e.id,o=e.setEditBook,r=e.toggleBodyScroll,i=[{value:"Fiction",content:"Fiction"},{value:"Nonfiction",content:"Nonfiction"},{value:"Drama",content:"Drama"},{value:"Folktale",content:"Folktale"},{value:"Poetry",content:"Poetry"}],l=t.split("<*)$!?^|^?!$(*>"),j=Object(w.a)(l,7),u=j[0],b=j[1],d=j[2],m=j[3],h=j[4],O=j[5],p=j[6],x=Object(n.useState)({title:u,author:b,completed:d,category:c,chapters:m,currChapter:h,comments:O,timeStamp:p}),f=Object(w.a)(x,2),v=f[0],g=f[1],N=Object(s.b)(),$=function(e){var t=e.target,c=t.name,n=t.value;g((function(e){return"chapters"===c&&parseInt(n,10)<parseInt(m,10)?Object(A.a)(Object(A.a)({},e),{},Object(B.a)({currChapter:"0"},c,n)):Object(A.a)(Object(A.a)({},e),{},Object(B.a)({currChapter:h},c,n))}))};return Object(P.jsx)("section",{className:"edit-container",children:Object(P.jsxs)("form",{className:"edit-form",children:[Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Title: "}),Object(P.jsx)("input",{name:"title",type:"text",onChange:$,value:v.title,placeholder:"Book title",className:"book-title"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Category: "}),Object(P.jsx)("select",{className:"book-category",name:"category",onChange:$,value:v.category,id:"books",children:i.map((function(e,t){var c=e.value,n=e.content;return Object(P.jsx)(E,{index:t,value:c.toString(),content:n},Math.random())}))})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Author: "}),Object(P.jsx)("input",{name:"author",type:"text",onChange:$,value:v.author,placeholder:"Author",className:"book-author"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("span",{children:"Chapters: "}),Object(P.jsx)("input",{name:"chapters",type:"number",onChange:$,value:v.chapters,placeholder:"Chapters",className:"book-chapters"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("button",{className:"edit-cancel-btn",onClick:function(){o((function(e){return!e})),r()},type:"button",children:"Cancel"}),Object(P.jsx)("button",{className:"edit-save-btn",onClick:function(){N(k(a));var e={title:"".concat(v.title,"<*)$!?^|^?!$(*>").concat(v.author,"<*)$!?^|^?!$(*>").concat(v.completed,"<*)$!?^|^?!$(*>").concat(v.chapters,"<*)$!?^|^?!$(*>").concat(v.currChapter,"<*)$!?^|^?!$(*>").concat(v.comments,"<*)$!?^|^?!$(*>").concat(v.timeStamp),category:v.category,item_id:Object(D.a)()};return setTimeout((function(){return N(y(e))}),1e3),g((function(){return{title:"",category:"Fiction",author:"",completed:"0%",chapters:"",currChapter:"0"}})),r(),!0},type:"button",children:"Save"})]})]})})},F=function(e){var t=Object(s.b)(),c=Object(n.useState)({name:"",comment:""}),a=Object(w.a)(c,2),o=a[0],r=a[1],i=e.title,l=e.setShowComments,j=e.toggleBodyScroll,u=i.split("<*)$!?^|^?!$(*>"),b=Object(w.a)(u,6)[5],d=function(e){var t=e.target,c=t.name,n=t.value;r((function(e){return Object(A.a)(Object(A.a)({},e),{},Object(B.a)({},c,n))}))};return Object(P.jsx)("div",{className:"edit-container",children:Object(P.jsxs)("div",{className:"comment-box",children:[Object(P.jsxs)("h1",{children:["All Comments (",JSON.parse(b).length,")"]}),Object(P.jsx)("table",{className:"comment-table",children:Object(P.jsxs)("tbody",{className:"comment-tb",children:[Object(P.jsxs)("tr",{className:"comment-tr",children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{children:"Comment"}),Object(P.jsx)("th",{children:"Date"})]}),JSON.parse(b).map((function(e){return Object(P.jsxs)("tr",{className:"comment-tr",children:[Object(P.jsx)("td",{children:e.name}),Object(P.jsx)("td",{children:e.comment}),Object(P.jsx)("td",{children:e.date})]},Object(D.a)())}))]})}),Object(P.jsx)("h1",{className:"add-heading",children:"Add A Comment"}),Object(P.jsxs)("form",{className:"comment-form",children:[Object(P.jsx)("input",{name:"name",type:"text",onChange:d,value:o.name,placeholder:"Name",className:"name"}),Object(P.jsx)("textarea",{name:"comment",type:"text",onChange:d,value:o.comment,placeholder:"Write your comment",className:"comment"}),Object(P.jsxs)("div",{className:"comment-buttons",children:[Object(P.jsx)("button",{className:"cancel",onClick:function(){l((function(e){return!e})),j()},type:"button",children:"Cancel"}),Object(P.jsx)("button",{className:"add-comment",onClick:function(){if(o.name||o.comment){var c=e.id,n=e.title,a=e.category,r=n.split("<*)$!?^|^?!$(*>"),s=Object(w.a)(r,7),i=s[0],l=s[1],u=s[2],b=s[3],d=s[4],m=s[5],h=s[6];t(k(c)),o.date=(new Date).toDateString();var O=JSON.parse(m);O.push(o);var p=JSON.stringify(O),x={title:"".concat(i,"<*)$!?^|^?!$(*>").concat(l,"<*)$!?^|^?!$(*>").concat(u,"<*)$!?^|^?!$(*>").concat(b,"<*)$!?^|^?!$(*>").concat(d,"<*)$!?^|^?!$(*>").concat(p,"<*)$!?^|^?!$(*>").concat(h),category:a,item_id:Object(D.a)()};setTimeout((function(){return t(y(x))}),1e3),j()}},type:"button",children:"Add Comment"})]})]})]})})},T=function(e){var t=e.title,c=e.id,a=e.category,o=e.setShowProgress,r=e.toggleBodyScroll,i=Object(s.b)(),l=t.split("<*)$!?^|^?!$(*>"),j=Object(w.a)(l,7),u=j[0],b=j[1],d=j[2],m=j[3],h=j[5],O=j[6],p=Object(n.useState)(0),x=Object(w.a)(p,2),f=x[0],v=x[1];return Object(P.jsx)("div",{className:"edit-container",children:Object(P.jsxs)("div",{className:"update-container",children:[Object(P.jsx)("span",{className:"heading",children:"Select Current Progress"}),Object(P.jsx)("span",{children:"(Last Completed Chapter)"}),Object(P.jsx)("select",{className:"chapter",name:"chapter",onChange:function(e){var t=e.target.value;v((function(){return t}))},value:f,children:function(){for(var e=[],t=parseInt(m,10),c=0;c<=t;c+=1)e.push(c);return e.map((function(e,t){return Object(P.jsx)(E,{value:e.toString(),content:"Chapter ".concat(e),index:t},Object(D.a)())}))}()}),Object(P.jsxs)("div",{className:"update-buttons",children:[Object(P.jsx)("button",{onClick:function(){o((function(e){return!e})),r()},type:"button",children:"Cancel"}),Object(P.jsx)("button",{onClick:function(){i(k(c));var e={title:"".concat(u,"<*)$!?^|^?!$(*>").concat(b,"<*)$!?^|^?!$(*>").concat(d,"<*)$!?^|^?!$(*>").concat(m,"<*)$!?^|^?!$(*>").concat(f,"<*)$!?^|^?!$(*>").concat(h,"<*)$!?^|^?!$(*>").concat(O),category:a,item_id:Object(D.a)()};console.log(e,"new state"),setTimeout((function(){return i(y(e))}),1e3),r()},type:"button",children:"Update Progress"})]})]})})},J=function(e){var t=e.title,c=e.category,a=e.id,o=e.index,r=Object(n.useState)(!1),i=Object(w.a)(r,2),l=i[0],j=i[1],u=Object(n.useState)(!1),b=Object(w.a)(u,2),d=b[0],m=b[1],h=Object(n.useState)(250),O=Object(w.a)(h,2),p=O[0],x=O[1],f=Object(n.useState)(!1),v=Object(w.a)(f,2),g=v[0],N=v[1],y=t.split("<*)$!?^|^?!$(*>"),$=Object(w.a)(y,5),C=$[0],S=$[1],B=$[3],A=$[4],D=Object(s.b)(),E=function(){document.querySelector("body").classList.toggle("stop-scrolling")};return Object(n.useEffect)((function(){var e=document.querySelector(".some".concat(o)),t=251-251/parseInt(B||1,10)*parseInt(A,10);e.style.strokeDashoffset=t}),[p,B,A,o]),Object(P.jsxs)("div",{className:"book",children:[l&&Object(P.jsx)(I,{title:t,category:c,id:a,setEditBook:j,toggleBodyScroll:E}),d&&Object(P.jsx)(F,{title:t,id:a,category:c,setShowComments:m,toggleBodyScroll:E}),g&&Object(P.jsx)(T,{title:t,id:a,category:c,setShowProgress:N,setProgressValue:x,toggleBodyScroll:E}),Object(P.jsxs)("div",{className:"part1",children:[Object(P.jsxs)("div",{className:"part1-first",children:[Object(P.jsx)("div",{className:"category",children:c}),Object(P.jsx)("div",{className:"title",children:C}),Object(P.jsx)("div",{className:"author",children:S})]}),Object(P.jsxs)("div",{className:"part1-second",children:[Object(P.jsx)("button",{onClick:function(){m((function(e){return!e})),E()},className:"comment-button",type:"button",children:"Comment"}),"|",Object(P.jsx)("button",{className:"remove-button",type:"button",onClick:function(){return D(k(a))},children:"Remove"}),"|",Object(P.jsx)("button",{onClick:function(){j((function(e){return!e})),E()},className:"edit-button",type:"button",children:"Edit"})]})]}),Object(P.jsxs)("div",{className:"part2And3",children:[Object(P.jsxs)("div",{className:"part2",children:[Object(P.jsxs)("svg",{className:"svg",width:"150",height:"150",children:[Object(P.jsx)("circle",{className:"circle-back",cx:"50",cy:"80",r:"40"}),Object(P.jsx)("circle",{className:"some".concat(o," circle-front"),cx:"50",cy:"80",r:"40"})]}),Object(P.jsxs)("div",{children:[Object(P.jsx)("div",{className:"percent",children:"".concat(parseInt(100/parseInt(B,10)*parseInt(A,10),10),"%")}),Object(P.jsx)("div",{className:"completed",children:"completed"})]})]}),Object(P.jsx)("div",{className:"pipe"}),Object(P.jsxs)("div",{className:"part3",children:[Object(P.jsx)("div",{className:"current-chapter",children:"Current Chapter"}),Object(P.jsx)("div",{className:"chapter",children:Object(P.jsx)("span",{className:"capterXOfY",children:"Chapter ".concat(A," of ").concat(B)})}),Object(P.jsx)("button",{onClick:function(){N((function(e){return!e})),E()},className:"update-button",type:"button",children:"Update Progress"})]})]})]})},M=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e})),c=t.books.length?t.books:[];c.map((function(e){var t=e,c=t.title.split("<*$!?^|^?!$*>"),n=Object(w.a)(c,7)[6];return t.timeStamp=n,t}));var a=c.sort((function(e,t){return parseInt(e.timeStamp,10)-parseInt(t.timeStamp,10)})).map((function(e,t){var c=e.title,n=e.category,a=e.id;return Object(P.jsx)(J,{title:c,category:n,id:a,index:t},Math.random())}));return Object(n.useEffect)((function(){e(N())}),[e]),Object(P.jsx)("div",{className:"all-books",children:a})},_=function(){return Object(P.jsx)("div",{children:Object(P.jsx)(M,{})})},L=function(){return Object(P.jsx)("div",{className:"category-page",children:"Under construction..."})},U=function(){return Object(P.jsx)("h1",{children:"Page Not Found"})},K=function(){return Object(P.jsx)("footer",{className:"footer",children:Object(P.jsx)("p",{className:"footer-text",children:"Created with \ud83d\udc96 by Henry Kc at Microverse Inc., US."})})},G=function(){var e=Object(s.b)(),t=Object(n.useState)({title:"",category:"Fiction",author:"",chapters:"",currChapter:"0",completed:"0%",comments:[]}),c=Object(w.a)(t,2),a=c[0],o=c[1],r=[{value:"Fiction",content:"Fiction"},{value:"Nonfiction",content:"Nonfiction"},{value:"Drama",content:"Drama"},{value:"Folktale",content:"Folktale"},{value:"Poetry",content:"Poetry"}],i=function(e){var t=e.target,c=t.name,n=t.value;o((function(e){return Object(A.a)(Object(A.a)({},e),{},Object(B.a)({},c,n))}))},l=a.title,j=a.category,u=a.author,b=a.chapters;return Object(P.jsxs)("div",{className:"form-container",children:[Object(P.jsx)("h1",{className:"add-new",children:"Add New Book"}),Object(P.jsxs)("form",{className:"form",children:[Object(P.jsx)("input",{name:"title",type:"text",onChange:i,value:l,placeholder:"Book title",className:"book-title"}),Object(P.jsx)("input",{name:"author",type:"text",onChange:i,value:u,placeholder:"Author",className:"book-author"}),Object(P.jsx)("input",{name:"chapters",type:"number",onChange:i,value:b,placeholder:"Chapters",className:"book-chapters"}),Object(P.jsx)("select",{className:"book-category",name:"category",onChange:i,value:j,id:"books",children:r.map((function(e,t){var c=e.value,n=e.content;return Object(P.jsx)(E,{index:t,value:c,content:n},Math.random())}))}),Object(P.jsx)("button",{onClick:function(){var t=a.title,c=a.author,n=a.completed,r=a.category,s=a.chapters,i=a.currChapter,l=a.comments;if(!t||!c||!s)return!1;var j=JSON.stringify(l),u={title:"".concat(t,"<*)$!?^|^?!$(*>").concat(c,"<*)$!?^|^?!$(*>").concat(n,"<*)$!?^|^?!$(*>").concat(s,"<*)$!?^|^?!$(*>").concat(i,"<*)$!?^|^?!$(*>").concat(j,"<*)$!?^|^?!$(*>").concat((new Date).getTime()),category:r,item_id:Object(D.a)()};return e(y(u)),o((function(e){return Object(A.a)(Object(A.a)({},e),{},{title:"",author:"",chapters:"",category:"Fiction"})})),!0},type:"button",className:"add-book-btn",children:"ADD BOOK"})]})]})},R=c(31),z=function(e){var t=e.route,c=e.name;return 0===e.index?Object(P.jsx)("li",{className:"list-item first",children:Object(P.jsx)(i.b,{className:"item",to:t,activeClassName:"active-link",exact:!0,children:c})}):Object(P.jsx)("li",{children:Object(P.jsx)(i.b,{className:"item",to:t,activeClassName:"active-link",exact:!0,children:c})})},q=function(){var e=[{route:"/",name:"BOOKS"},{route:"/categories",name:"CATEGORIES"}];return Object(P.jsxs)("nav",{className:"navbar",children:[Object(P.jsxs)("div",{className:"name-list-container",children:[Object(P.jsx)("h1",{className:"app-name",children:"Bookstore CMS"}),Object(P.jsx)("ul",{className:"list-items",children:e.map((function(e,t){return Object(P.jsx)(z,{index:t,name:e.name,route:e.route},Math.random())}))})]}),Object(P.jsx)("div",{className:"user",children:Object(P.jsx)(R.a,{className:"fa-user"})})]})},V=function(){return Object(P.jsxs)("div",{className:"main",children:[Object(P.jsxs)("section",{children:[Object(P.jsx)(q,{}),Object(P.jsxs)(S.c,{children:[Object(P.jsxs)(S.a,{exact:!0,path:"/",children:[Object(P.jsx)(_,{}),Object(P.jsx)(G,{})]}),Object(P.jsx)(S.a,{path:"/categories",children:Object(P.jsx)(L,{})}),Object(P.jsx)(S.a,{path:"*",children:Object(P.jsx)(U,{})})]})]}),Object(P.jsx)("section",{children:Object(P.jsx)(K,{})})]})};c(46);r.a.render(Object(P.jsx)(a.a.StrictMode,{children:Object(P.jsx)(i.a,{basename:"/Bookstore-React-Redux",children:Object(P.jsx)(s.a,{store:C,children:Object(P.jsx)(V,{})})})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.eadac198.chunk.js.map